<!DOCTYPE html>
<html>
<head>
  <title>Registration Form</title>
</head>
<body>

<h2>Registration Form</h2>

<form id="registrationForm">
  <label for="name">Name:</label>
  <input type="text" id="name" name="name" required><br><br>

  <label for="email">Email:</label>
  <input type="email" id="email" name="email" required><br><br>

  <label for="password">Password:</label>
  <input type="password" id="password" name="password" required><br><br>

  <label for="dob">Date of Birth:</label>
  <input type="date" id="dob" name="dob" required><br><br>

  <label for="acceptedTerms">Accepted terms?</label>
  <input type="checkbox" id="acceptedTerms" name="acceptedTerms" required><br><br>

  <button type="submit">Submit</button>
</form>

<table border="1" id="dataTable">
  <thead>
    <tr>
      <th>Name</th>
      <th>Email</th>
      <th>Password</th>
      <th>Dob</th>
      <th>Accepted terms?</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
  // Load existing entries from local storage
  const existingEntries = JSON.parse(localStorage.getItem('entries')) || [];

  function updateTable() {
    const tableBody = document.querySelector('#dataTable tbody');
    tableBody.innerHTML = '';

    for (const entry of existingEntries) {
      const row = tableBody.insertRow();
      for (const key in entry) {
        const cell = row.insertCell();
        cell.appendChild(document.createTextNode(entry[key]));
      }
    }
  }

  function addEntryToTable(name, email, password, dob, acceptedTerms) {
    const tableBody = document.querySelector('#dataTable tbody');
    const row = tableBody.insertRow();

    const values = [name, email, password, dob, acceptedTerms];
    for (const value of values) {
      const cell = row.insertCell();
      cell.appendChild(document.createTextNode(value));
    }
  }

  document.getElementById('registrationForm').addEventListener('submit', function(event) {
    event.preventDefault();

    const name = document.getElementById('name').value;
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    const dob = document.getElementById('dob').value;
    const acceptedTerms = document.getElementById('acceptedTerms').checked;

    // Check age eligibility (between 18 and 55 years old)
    const dobDate = new Date(dob);
    const today = new Date();
    const age = today.getFullYear() - dobDate.getFullYear();
    if (age < 18 || age > 55) {
      alert('You must be between 18 and 55 years old to register.');
      return;
    }

    // Check email validity
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(email)) {
      alert('Please enter a valid email address.');
      return;
    }

    const entry = {
      Name: name,
      Email: email,
      Password: password,
      Dob: dob,
      'Accepted terms?': acceptedTerms ? 'Yes' : 'No'
    };

    existingEntries.push(entry);

    // Save entries to local storage
    localStorage.setItem('entries', JSON.stringify(existingEntries));

    // Update the table with the new entry
    addEntryToTable(name, email, password, dob, acceptedTerms);

    // Reset the form
    document.getElementById('registrationForm').reset();
  });

  // Update the table when the page loads
  updateTable();
</script>

</body>
</html>
